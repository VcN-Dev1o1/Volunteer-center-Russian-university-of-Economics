{% extends "base.html" %}
{% load static %}

{% block title %}{{ news.title }} — Новости{% endblock %}

{% block content %}
  <article class="page-wrap" style="padding: 24px 0;">
    <a href="{% url 'core:news_list' %}" style="display:inline-block; margin-bottom:12px; color:inherit; opacity:.75; text-decoration:none;">
      ← К списку новостей
    </a>

    <header style="margin-bottom: 14px;">
      <div style="font-size:12px; opacity:.7; margin-bottom: 8px;">
        {{ news.published_at|date:"d.m.Y H:i" }} · {{ news.editor_name|default:"ВЦ РЭУ" }}
        {% if news.pin_until %}
          · Закреплено до {{ news.pin_until|date:"d.m.Y H:i" }}
        {% endif %}
      </div>

      <h1 style="margin:0 0 8px; font-size: 28px; line-height:1.15;">
        {{ news.title }}
      </h1>

      {% if news.lead %}
        <p style="margin:0; font-size: 15px; opacity:.85; max-width: 78ch;">
          {{ news.lead }}
        </p>
      {% endif %}
    </header>

    {% if news.image %}
      <figure style="margin: 18px 0 18px;">
        <img class="news-image" src="{{ news.image.url }}" alt="{{ news.title|escape }}" loading="lazy">
      </figure>
    {% endif %}

    <div class="news-content">
      {{ news.body|linebreaks }}
    </div>
    {% if news.blocks.exists %}
      {% for block in news.blocks.all %}
        {% if block.block_type == "text" %}
          <div class="news-block news-block--text">
            {{ block.text|linebreaks }}
          </div>
        {% elif block.block_type == "image" and block.image %}
          <figure class="news-block news-block--image">
            <img src="{{ block.image.url }}" alt="{{ news.title|escape }}" loading="lazy">
          </figure>
        {% endif %}
      {% endfor %}
    {% endif %}
  </article>
{% endblock %}